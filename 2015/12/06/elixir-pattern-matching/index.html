<!doctype html> <html lang="en"> <head> <meta charset="utf-8"/> <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="Content-Language" content="en"> <title>Elixir Pattern Matching | TheWorkAround</title> <meta property="og:title" content="Elixir Pattern Matching"/> <meta name="author" content="Brandon"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="A brief look at Elixirs Pattern matching and the power the equal sign operator."/> <meta property="og:description" content="A brief look at Elixirs Pattern matching and the power the equal sign operator."/> <link rel="canonical" href="https://theworkaround.com/2015/12/06/elixir-pattern-matching/"/> <meta property="og:url" content="https://theworkaround.com/2015/12/06/elixir-pattern-matching/"/> <meta property="og:site_name" content="TheWorkAround"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2015-12-06T00:00:00+00:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Elixir Pattern Matching"/> <link type="application/atom+xml" rel="alternate" href="https://theworkaround.com/feed.xml" title="TheWorkAround"/> <meta name="author" content="Brandon Hicks"> <meta name="description" content="The infinite ramblings and ideas of Brandon Hicks"/> <meta name="generator" content="Bridgetown"> <meta name="referrer" content="no-referrer-when-downgrade"> <meta name="robots" content="index, follow"> <link rel="preload" href="/_bridgetown/static/index.AIKPFYK3.css" as="style"> <link rel="preload" href="/_bridgetown/static/index.IGRG3H33.js" as="script"> <link rel="preconnect" href="/" crossorigin> <link rel="preconnect" href="https://rsms.me/inter/inter.css" crossorigin> <link rel="dns-prefetch" href="https://www.googletagmanager.com/"> <link rel="dns-prefetch" href="https://www.google-analytics.com/"> <link rel="dns-prefetch" href="https://ajax.googleapis.com/"> <link rel="stylesheet" href="https://rsms.me/inter/inter.css"> <link rel="stylesheet" href="/_bridgetown/static/index.AIKPFYK3.css" data-turbo-track="reload"/> <script src="/_bridgetown/static/index.IGRG3H33.js" data-turbo-track="reload" defer></script> <link href="https://theworkaround.com/sitemap.xml" rel="sitemap" title="Sitemap" type="application/xml"> <link href="https://theworkaround.com/humans.txt" rel="author" type="text/plain"> <link rel="manifest" href="https://theworkaround.com/site.webmanifest"> <link rel="me" href="https://theworkaround.com/" type="text/html"> <link rel="me" href="https://github.com/tarellel"> <link rel="me" href="https://twitter.com/tarellel"> <meta name="theme-color" content="#4cb8c4"> </head> <body class="post antialiased min-h-full font-inter font-normal leading-normal bg-white text-gray-400"> <nav class="border-t-12 border-cyan-600 py-3 flex flex-col sm:flex-row sm:justify-between sm:items-center p-4" role="navigation" aria-label="Main"> <div class="text-left"> <h3 class="text-3xl font-extrabold text-gray-600"> <a href="/" class="text-gray-600" title="Goto /" key="home">TheWorkAround</a> </h3> <p class="text-md font-semibold leading-5 text-gray-400">Brandon Hicks</p> </div> <div class="sm:text-right text-lg lg:text-xl flex space-y-4 sm:space-y-0 sm:space-x-9 content-center mt-3 sm:mt-0 flex-col sm:flex-row"> <a href="https://theworkaround.com/about" class="font-semibold text-gray-700 tracking-tight" title="About Me" key="about">About</a> <a href="https://theworkaround.com/posts" class="font-semibold text-gray-700 tracking-tight" title="View a list of all posts" key="posts">Posts</a> <a href="https://theworkaround.com/projects"" class="font-semibold text-gray-700 tracking-tight" title="Projects I'm working on" key="projects">Projects</a> <a href="https://theworkaround.com/feed.xml" class="flex content-center text-orange-600" title="RSS Feed" key="feed"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" className="h-5 w-5 self-center text-orange-600" class=" h-5 w-5 self-center text-orange-600" alt="RSS Feed Icon" aria-hidden="true" focusable="false" role="img"> <path d="M4 11a9 9 0 0 1 9 9"></path> <path d="M4 4a16 16 0 0 1 16 16"></path> <circle cx="5" cy="19" r="1"></circle> </svg> </a> </div> </nav> <main class="post px-10 sm:px-7 border-0"> <h1>Elixir Pattern Matching</h1> <h2 id="special-characters-have-meaning-as-well">Special Characters have meaning as well</h2> <p>Learning any new programming language is a always a great challenge. There’s always new techniques, methods, and syntax to learn. But it is also a great experience to expand you knowledge and learn new tricks and with Elixir this is also the case. As with many programming languages there are numerous keywords and special characters that have meaning. They can assign a value, perform some sort of logic test, run a method, etc. And in this article we will taking a brief look at Elixir based Pattern Matching.</p> <h3 id="pattern-matching">Pattern matching</h3> <p>In numerous programming languages the equal symbol <code class="highlighter-rouge">=</code> is generally an assignment operator. Which means you set XYZ variable to the value of JKL <code class="highlighter-rouge">xyz = 'FooBar'</code>. You can usually assign an object, a value, a function, or many other datatypes to a variable. With Elixir this is still the case, but with exceptions. In Elixir, the equals operator means to match the left side of the <code class="highlighter-rouge">=</code> sign to the the right side.</p> <div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iex</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">7</span>
<span class="c1"># =&gt; 7</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c1"># =&gt; 5</span>
<span class="n">iex</span><span class="o">&gt;</span> <span class="mi">7</span> <span class="o">=</span> <span class="n">y</span>
<span class="c1"># =&gt; ** (MatchError) no match of right hand side value: 5</span>
</code></pre></div></div> <p>You may be wondering what this error is about. Well the variable <code class="highlighter-rouge">y</code> was assigned the value of 5, meaning that in the last line you are stating that 7 = 5. This value should always be false. Now if the variable was on the left side of the equal sign the value of 7 would have been assigned the variable.</p> <h3 id="taking-it-a-step-farther">Taking it a step farther</h3> <p>Once you begin using pattern matching, it can become a very powerful feature in you application. Not only can you do pattern matching with basic variables and datatypes, you can also match values with tuples and lists. This can be a double edged sword, it can either complicate the heck out of your program or make things work extremely effectively. Pattern matching assignment is a great tool when working with tuples/lists, because it allows us to pick which values we wish to assign and use.</p> <div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">costanza</span> <span class="o">=</span> <span class="p">%{</span><span class="ss">name:</span> <span class="s2">"George"</span><span class="p">,</span> <span class="ss">age:</span> <span class="mi">27</span><span class="p">,</span> <span class="ss">likes:</span> <span class="s2">"Sports"</span><span class="p">}</span>
<span class="c1"># =&gt; %{age: 27, likes: "Sports", name: "George"}</span>

<span class="c1"># lets verify name is an unassigned variable</span>
<span class="n">name</span>
<span class="c1"># =&gt; ** (CompileError) iex:2: undefined function name/0</span>

<span class="p">%{</span><span class="ss">name:</span> <span class="n">name</span><span class="p">}</span> <span class="o">=</span> <span class="n">costanza</span>
<span class="c1"># =&gt; %{age: 27, likes: "Sports", name: "George"}</span>

<span class="n">name</span>
<span class="c1"># =&gt; "George"</span>
</code></pre></div></div> <p>Lets put this in prospective of an HTTP request/response, to assign</p> <div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="n">result</span><span class="p">,</span> <span class="n">value</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:error</span><span class="p">,</span> <span class="mi">404</span><span class="p">}</span>
<span class="c1"># =&gt; {:error, 404}</span>

<span class="n">result</span>
<span class="c1"># =&gt; :error</span>
</code></pre></div></div> <p>Now rather than assigning values, lets look at an example of pattern matching based on conditional comparisons.</p> <div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">reponse</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:error</span><span class="p">,</span> <span class="mi">404</span><span class="p">}</span>
<span class="c1"># =&gt; ** (MatchError) no match of right hand side value: {:error, 404}</span>

<span class="p">{</span><span class="ss">:status</span><span class="p">,</span> <span class="n">reponse</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:status</span><span class="p">,</span> <span class="mi">200</span><span class="p">}</span>
<span class="c1"># =&gt; {:status, 200}</span>

<span class="p">{</span><span class="mi">200</span><span class="p">,</span> <span class="n">response</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span><span class="mi">200</span><span class="p">,</span> <span class="s2">"html/text;"</span><span class="p">}</span>
<span class="c1"># =&gt; {200, "html/text;"}</span>
</code></pre></div></div> <p>In the first example you can see the left hand and right hand of the <code class="highlighter-rouge">=</code> operator are not equal and do not having matching :atoms so they can not be assigned values to their corresponding variables. But the second example does have matching atoms/object so their values can be associated with one another. By using this pattern matching techniques, you are not solely limited to using :atoms to match the values, you can use various data types. If you look at the third example you can see that they correspond with each other with an integer that has the value of <code class="highlighter-rouge">200</code>. This may look like a mess, why would you want to do this? Well the sample below might shine some like on this. With pattern matching you could assign the values based on a functions response values, using a simple HTTP request I will try to show you that it isn’t so hard to understand how and why these values may be passed.</p> <div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Http</span> <span class="k">do</span>
  <span class="k">def</span> <span class="n">request</span> <span class="k">do</span>
    <span class="c1"># ...</span>
    <span class="p">{</span><span class="ss">:status</span><span class="p">,</span> <span class="mi">404</span><span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="p">{</span><span class="ss">:status</span><span class="p">,</span> <span class="n">response</span><span class="p">}</span> <span class="o">=</span> <span class="no">Http</span><span class="o">.</span><span class="n">request</span><span class="p">()</span>
<span class="c1"># =&gt; {:status, 404}</span>

<span class="n">response</span>
<span class="c1"># =&gt; 404</span>
</code></pre></div></div> <h3 id="functional-pattern-matching">Functional Pattern Matching</h3> <p>When declaring and calling functions you can continue to do pattern matching based on the declared values without using the equals <code class="highlighter-rouge">=</code> assignment operator. Generally function pattern matching is used for with making recursion effective and manageable.</p> <div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">defmodule</span> <span class="no">Seinfield</span> <span class="k">do</span>
  <span class="k">def</span> <span class="n">cast</span><span class="p">([],</span> <span class="n">_</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="p">[]</span> <span class="c1"># STOP: when end of list has been reached</span>

  <span class="k">def</span> <span class="n">cast</span><span class="p">(</span><span class="n">list</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># start index from 1 when beginning to map through the list</span>
  <span class="k">def</span> <span class="n">cast</span><span class="p">([</span><span class="n">head</span> <span class="o">|</span> <span class="n">tail</span><span class="p">],</span> <span class="n">count</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">count</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">head</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">cast</span><span class="p">(</span><span class="n">tail</span><span class="p">,</span> <span class="p">(</span><span class="n">count</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">characters</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"George"</span><span class="p">,</span><span class="s2">"Jerry"</span><span class="p">,</span><span class="s2">"Kramer"</span><span class="p">,</span><span class="s2">"Elaine"</span><span class="p">,</span><span class="s2">"Newman"</span><span class="p">]</span>
<span class="c1"># =&gt; ["George", "Jerry", "Kramer", "Elaine", "Newman"]</span>

<span class="no">Seinfield</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">characters</span><span class="p">)</span>

<span class="c1"># =&gt; George</span>
<span class="c1"># Jerry</span>
<span class="c1"># Kramer</span>
<span class="c1"># Elaine</span>
<span class="c1"># Newman</span>
</code></pre></div></div> <p>I know this is an extreme example jumping from basic variable declarations to module/function matching. But if you look at the cast function, you’ll notice that when passing parameters using a list Elixir will match to the lists <code class="highlighter-rouge">[head |tail]</code> to make break down in forms of context here is what it would look like with the characters list passed through it.</p> <div class="language-elixir highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">head</span> <span class="o">|</span> <span class="n">tail</span><span class="p">]</span>
<span class="p">[</span><span class="s2">"George"</span> <span class="o">|</span> <span class="s2">"Jerry"</span><span class="p">,</span><span class="s2">"Kramer"</span><span class="p">,</span><span class="s2">"Elaine"</span><span class="p">,</span><span class="s2">"Newman"</span><span class="p">]</span>
</code></pre></div></div> <h3 id="clearing-it-up">Clearing it up</h3> <p>I hope you have better understanding of Elixirs pattern matching capabilities and that the equal sign is not just an assignment operator in Elixir. Elixir has a massive amount of capabilities and some of these may be confusing as hell, but pattern matching helps bring it one step closer to help make everything easier to understand and use.</p> </main> <footer class="space-y-3 text-sm text-center"> <p> Contact me at <a href="mailto:tarellel@gmail.com">tarellel@gmail.com</a> <p/> <p> &copy; 2004 - 2023 Brandon Hicks - All rights reserved.<br> Content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons 4.0 License</a>.<br> Code samples and snippets are licensed under the <a href="https://github.com/tarellel/theworkaround.com/blob/main/LICENSE">MIT License</a> </p> </footer> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-41384218-1"></script> <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-41384218-1');
    </script> </body> </html>