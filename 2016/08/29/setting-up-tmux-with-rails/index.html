<!doctype html> <html lang="en"> <head> <meta charset="utf-8"/> <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="Content-Language" content="en"> <title>Setting up tmux with Rails | TheWorkAround</title> <meta property="og:title" content="Setting up tmux with Rails"/> <meta name="author" content="Brandon"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="A walk through on how to setup tmux for Rails development"/> <meta property="og:description" content="A walk through on how to setup tmux for Rails development"/> <link rel="canonical" href="https://theworkaround.com/2016/08/29/setting-up-tmux-with-rails/"/> <meta property="og:url" content="https://theworkaround.com/2016/08/29/setting-up-tmux-with-rails/"/> <meta property="og:site_name" content="TheWorkAround"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2016-08-29T00:00:00+00:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Setting up tmux with Rails"/> <link type="application/atom+xml" rel="alternate" href="https://theworkaround.com/feed.xml" title="TheWorkAround"/> <meta name="author" content="Brandon Hicks"> <meta name="description" content="The infinite ramblings and ideas of Brandon Hicks"/> <meta name="generator" content="Bridgetown"> <meta name="referrer" content="no-referrer-when-downgrade"> <meta name="robots" content="index, follow"> <link rel="preload" href="/_bridgetown/static/index.UPVOJSIG.css" as="style"> <link rel="preload" href="/_bridgetown/static/index.KL3TZR4T.js" as="script"> <link rel="preconnect" href="/" crossorigin> <link rel="preconnect" href="https://rsms.me/inter/inter.css" crossorigin> <link rel="dns-prefetch" href="https://www.googletagmanager.com/"> <link rel="dns-prefetch" href="https://www.google-analytics.com/"> <link rel="dns-prefetch" href="https://ajax.googleapis.com/"> <link rel="stylesheet" href="https://rsms.me/inter/inter.css"> <link rel="stylesheet" href="/_bridgetown/static/index.UPVOJSIG.css" data-turbo-track="reload"/> <script src="/_bridgetown/static/index.KL3TZR4T.js" data-turbo-track="reload" defer></script> <link href="https://theworkaround.com/sitemap.xml" rel="sitemap" title="Sitemap" type="application/xml"> <link href="https://theworkaround.com/humans.txt" rel="author" type="text/plain"> <link rel="manifest" href="https://theworkaround.com/site.webmanifest"> <link rel="me" href="https://theworkaround.com/" type="text/html"> <link rel="me" href="https://github.com/tarellel"> <link rel="me" href="https://twitter.com/tarellel"> <meta name="theme-color" content="#4cb8c4"> </head> <body class="post antialiased min-h-full font-inter font-normal leading-normal bg-white text-gray-400"> <nav class="border-t-12 border-cyan-600 py-3 flex flex-col sm:flex-row sm:justify-between sm:items-center p-4" role="navigation" aria-label="Main"> <div class="text-left"> <h3 class="text-3xl font-extrabold text-gray-600"> <a href="/" class="text-gray-600" title="Goto /" key="home">TheWorkAround</a> </h3> <p class="text-md font-semibold leading-5 text-gray-400">Brandon Hicks</p> </div> <div class="sm:text-right text-lg lg:text-xl flex space-y-4 sm:space-y-0 sm:space-x-9 content-center mt-3 sm:mt-0 flex-col sm:flex-row"> <a href="https://theworkaround.com/about" class="font-semibold text-gray-700 tracking-tight" title="About Me" key="about">About</a> <a href="https://theworkaround.com/posts" class="font-semibold text-gray-700 tracking-tight" title="View a list of all posts" key="posts">Posts</a> <a href="https://theworkaround.com/projects"" class="font-semibold text-gray-700 tracking-tight" title="Projects I'm working on" key="projects">Projects</a> <a href="https://theworkaround.com/feed.xml" class="flex content-center text-orange-600" title="RSS Feed" key="feed"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" className="h-5 w-5 self-center text-orange-600" class=" h-5 w-5 self-center text-orange-600" alt="RSS Feed Icon" aria-hidden="true" focusable="false" role="img"> <path d="M4 11a9 9 0 0 1 9 9"></path> <path d="M4 4a16 16 0 0 1 16 16"></path> <circle cx="5" cy="19" r="1"></circle> </svg> </a> </div> </nav> <main class="post px-10 sm:px-7 border-0"> <h1>Setting up tmux with Rails</h1> <h2 id="why-use-tmux">Why use tmux?</h2> <p>You may have a similar workflow the way I do. When I’m working on a rails project I tend to have several tabs and/or windows open in the terminal. After a while it tends to be a heaping mess and I end up having to close the terminal down and start all over again. And other times, I have just became tired of having to switch between different tabs and windows, trying to find the one that I need.</p> <p>As you can see from the image below, this method works. But having to switch from tab to tab, just to view your output logs or guard builds/tests gets to be a pain after a while.</p> <p><img src="/images/posts/tmux_wRails/multitabs.png" alt="iTerm with Multitabs" class="img-fluid mx-auto"/></p> <p>So what is tmux? It’s a mutliplex and very similar to the *nix screen process. It allows you to perform several processes all within the same screen, without having to switch tabs or windows. And there are tons more applications you can do with than building a rails application, but at the moment it’s a great example of why it makes such a great tool.</p> <p>I can tell you this much, so far I’ve only used tmux for a short period of time but it has become an essential tool in my development workflow. Tmux’s window and session management makes it very easy to get started and increase my productivity.</p> <h3 id="setting-up-tmux">Setting up tmux</h3> <p>I’m just going to assume you’re on OSx, with homebrew installed. If you are using Debian, Ubuntu, or some other distro it’s pretty close the same commands. You’ll just be using different package manager commands. Instead of using <code class="highlighter-rouge">brew</code>, you will be making the installs with <code class="highlighter-rouge">apt-get</code>, <code class="highlighter-rouge">pacman</code>, etc.</p> <p>Lets begin by install tmux</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>tmux

<span class="c"># allows you to access OSx clipboard (pbcopy &amp; pbpaste) through tmux</span>
brew <span class="nb">install </span>reattach-to-user-namespace
</code></pre></div></div> <p>Now if this is your first time installing tmux we’ll need to create a <code class="highlighter-rouge">.tmux.conf</code> file.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># this will contain colors, settings, key-bindings, etc.</span>
<span class="nb">touch</span> ~/.tmux.conf
</code></pre></div></div> <p>Now lets install the tux Plugin Manager (yes I know another one).</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># make a .tmux directory to store everything</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/.tmux/plugins

<span class="c"># While we're at it, lets install tmux package manager</span>
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
</code></pre></div></div> <p>The tmux plugin manager, makes it easy to install, update, and remove any and all plugins you may wish to use.</p> <p>Lets begin by adding our first plugin to tmux, tmux-sensible. You you dive in, it won’t seem like much but it contains various handy default values, bindings, etc. that will make tmux easier to use. The best part of this plugin, is that it’s not supposed to overwrite any config values you may have in you <code class="highlighter-rouge">~/.tmux.conf</code> file. No add the following to very bottom of your <code class="highlighter-rouge">~/.tmux.conf</code> file.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">set</span> -<span class="n">g</span> @<span class="n">plugin</span> <span class="s1">'tmux-plugins/tmux-sensible'</span> <span class="c"># recommened tmux defaults
</span><span class="n">set</span> -<span class="n">g</span> @<span class="n">plugin</span> <span class="s1">'tmux-plugins/tmux-yank'</span> <span class="c"># allows copying to system vie tmux
</span>
<span class="c"># Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
</span><span class="n">run</span> <span class="s1">'~/.tmux/plugins/tpm/tpm'</span>
</code></pre></div></div> <p>Now is where it gets tricky, with tmux you have a prefix-key combo that you have to use in order issue particular commands. By default the prefix keys are <code class="highlighter-rouge">CTRL+b</code>. With some commands/key-combos it makes a difference between <code class="highlighter-rouge">b</code> and <code class="highlighter-rouge">B</code> or <code class="highlighter-rouge">T</code> and <code class="highlighter-rouge">t</code>.</p> <p>Now lets fire up, tmux first the first time. At first it won’t be anything we haven’t seen before. But once you learn the keys and get the right plugins, it’ll be a whole new experience.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># fire up tmux by issuing the following command</span>
tmux
</code></pre></div></div> <p>You’ll terminal will flicker for a second and you have a very generic/ASCII based status bar appear at the bottom. This means you’re doing great. Now lets install the tmux plugins by doing the following key combo <code class="highlighter-rouge">CTRL+b I</code>. You may have to wait a few minutes, but it’ll install all specified plugins in the bottom of the tmux.conf file.</p> <p><img src="/images/posts/tmux_wRails/basic_tmux.png" alt="Basic tmux" class="img-fluid center-block"/></p> <p>Now if you want to play around with tmux, to get additional windows, panes, sessions, etc. Great. As you can see from the image, tmux is a multiplexer which means it allows you to have several processes all running within a single terminal screen/tab.</p> <h3 id="setup-and-install-tmuxinator">Setup and Install Tmuxinator</h3> <p>Now I’m going to assume you have some version of ruby installed already (various *nix OS’s are coming with it preinstalled). So up next, we will will install <a href="https://github.com/tmuxinator/tmuxinator">tmuxinator</a>, this is ruby gem that makes it a heck of a lot easier to make preconfigured panes and windows with default commands that run when they’re created.</p> <p>We first need to install tmuxinator and verifiy all the required requirements are met in order to use it.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># install tmuxinator</span>
gem <span class="nb">install </span>tmuxinator

<span class="c"># verify everything is ready</span>
tmuxinator doctor
</code></pre></div></div> <p>You will now need to add tmuxinator to your shell, for consistency sake I’ll just assume your using zsh/oh-my-zsh. You will need to add <code class="highlighter-rouge">source ~/.bin/tmuxinator.zsh</code> to your .zshrc file.</p> <p>Now you’ll be thinking, but no file by the name <code class="highlighter-rouge">~/.bin/tmuxinator.zsh</code> even exists. What gives? Well lets download the required completion file and get started. And if you’re not using zsh, there’s files for bash and fish as well.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Download zsh completion file</span>
curl <span class="nt">-O</span> https://raw.githubusercontent.com/tmuxinator/tmuxinator/master/completion/tmuxinator.zsh
<span class="nb">mkdir</span> ~/.bin
<span class="nb">mv </span>tmuxinator.zsh ~/.bin/
</code></pre></div></div> <p>Now in order to make sure everything is loaded and configured, reload the current terminal.</p> <h3 id="lets-create-a-tmuxinator-project">Lets create a tmuxinator project</h3> <p>Tmuxinator projects let us setup a predefined layout, with panes performing specific tasks. Rather than mess around and build a layout every time we want to open up tmux.</p> <p>To create a tmuxinator project, lets issue the following command:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tmuxinator new <span class="o">[</span>project_name]

<span class="c"># for example</span>
tmuxinator new red_willow
</code></pre></div></div> <p>This will generate a project.yml file in the <code class="highlighter-rouge">~/.tmuxinator</code> folder. It should also open up your specified $EDITOR allowing you to get a rough idea on what tmuxinator’s configuration looks. It’s very basic theres panes, windows, even layouts, the <code class="highlighter-rouge">root: ~/[project_name]</code> at the top is the folder you specify for tmuxinator to open up all the tmux terminals to.</p> <p>Below is an example of a pretty basic rails based tmux session, built with tmuxinator.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ~/.tmuxinator/tasky.yml</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">tasky</span>
<span class="na">root</span><span class="pi">:</span> <span class="s">~/Desktop/red_willow</span>

<span class="na">windows</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">main</span><span class="pi">:</span>
      <span class="c1"># http://stackoverflow.com/questions/9812000/specify-pane-percentage-in-tmuxinator-project</span>
      <span class="c1"># use: tmux list-windows to get coords and window sizes</span>
      <span class="na">layout</span><span class="pi">:</span> <span class="s">b147,208x73,0,0[208x62,0,0,208x10,0,63{104x10,0,63,103x10,105,63}]</span>
      <span class="na">panes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">rails server thin</span>
        <span class="pi">-</span> <span class="s">guard</span>
        <span class="pi">-</span> <span class="s">atom .</span>
        <span class="pi">-</span> <span class="s">sleep 7 &amp;&amp; rails -t</span>
        <span class="pi">-</span> <span class="s">rails c</span>
        <span class="c1"># - foreman start</span>
  <span class="pi">-</span> <span class="na">logs</span><span class="pi">:</span> <span class="s">tail -f log/development.log</span>
</code></pre></div></div> <p>Now issue the following command to initiate the tmux session <code class="highlighter-rouge">tmuxinator [project_name]</code> From here it may take a few seconds for everything to load up and start running. You should now have terminal session similar to the image below. Your sessions colors, panes, and windows may be a bit different from what it looks like. That’s because you will need to setup your tmux config and trust me figuring out all the settings to use can be a major beast to deal with. So to make things a little easier and somewhere to start from, here’s a copy of my current <a href="https://raw.githubusercontent.com/tarellel/dotfiles/master/rc/tmux.conf">tmux.conf</a>. And if your lazy, you can always search <a href="https://github.com/">github</a> for .dotfile repositories because there are tons and tons of tmux.conf files listed.</p> <p><img src="/images/posts/tmux_wRails/tmuxinator_wRails.png" alt="tmuxinator with Rails" class="img-fluid center-block"/></p> <p>How it’s time to let you loose on your own and see what kind of project configure best suites your needs.</p> <hr/> <h3 id="tmux-commandsshortcuts">tmux commands/shortcuts</h3> <p>Your prefix key can be configured in <code class="highlighter-rouge">~/.tmux.conf</code>, but I’ve chose to leave it as <code class="highlighter-rouge">CTRL+b</code>, because it means there’s no way I will accidentally close or move between a window, pane, session, etc. And this is just a small batch of commands you can do, tmux is a massive program with tons of features I haven’t even begin to think about.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#All of these require you to first initiate the prefix key combo:</span>
<span class="c"># Default Prefix: CTRL+B and than whatever you want it to do</span>

<span class="s2">" - Horizontal split
% - Vertical split
&lt;arrow buttom&gt; - moves between session panes
z - loads window focus to current tmux panel
c - load up new tmux window
&lt;window number&gt; - switches between specified window
d - detach current tmux session
x - kill current pane in focus
[space] - toggle between layouts
</span></code></pre></div></div> <p>And here a few essential tmux console commands:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># to view list of current tmux sessions</span>
tmux <span class="nb">ls</span>

<span class="c"># to reattach tmux panels (number specified will be specified tmux session from tmux ls)</span>
tmux attach <span class="nt">-t</span> 0

<span class="c">#To kill specific tmux session</span>
tmux kill-session <span class="nt">-t</span> 0

<span class="c"># kills the last tmux session on the list</span>
tmux kill-session

<span class="c"># to completely kill tmux</span>
tmux kill-server
</code></pre></div></div> <ul> <li> <p><a href="http://hyperpolyglot.org/multiplexers">Terminal Multiplexers commands and shortcuts</a></p> </li> <li> <p><a href="https://tmuxcheatsheet.com/">tmux cheatsheet</a></p> </li> <li> <p><a href="tmux &amp; screen cheat-sheet">tmux and screen cheatsheet</a></p> </li> </ul> <hr/> <h3 id="additional-resources">Additional Resources</h3> <ul> <li> <p><a href="http://manpages.ubuntu.com/manpages/precise/en/man1/tmux.1.html">tmux man page</a></p> </li> <li> <p><a href="https://robots.thoughtbot.com/a-tmux-crash-course">A tmux crash course</a> : thoughtbot</p> </li> <li> <p><a href="https://www.sitepoint.com/tmux-a-simple-start/">Tmux: A Simple Start</a></p> </li> <li> <p><a href="http://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/">Making tmux Pretty and Usable</a></p> </li> <li> <p><a href="https://github.com/tmuxinator/tmuxinator">tmuxinator</a></p> </li> </ul> </main> <footer class="space-y-3 text-sm text-center"> <p> Contact me at <a href="mailto:tarellel@gmail.com">tarellel@gmail.com</a> <p/> <p> &copy; 2004 - 2023 Brandon Hicks - All rights reserved.<br> Content on this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons 4.0 License</a>.<br> Code samples and snippets are licensed under the <a href="https://github.com/tarellel/theworkaround.com/blob/main/LICENSE">MIT License</a> </p> </footer> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-41384218-1"></script> <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-41384218-1');
    </script> </body> </html>